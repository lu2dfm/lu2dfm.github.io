
{{- $pages := .pages }}
{{- $filtered := slice }}

{{- range $pages }}
  {{- $shouldShow := false }}

  {{- /* Verificar si tiene series */ -}}
  {{- $hasSeries := isset .Params "series" }}
  {{- $hasSeriesRole := isset .Params "series_role" }}

  {{- if not $hasSeries }}
    {{- /* No es parte de ninguna serie - siempre mostrar */ -}}
    {{- $shouldShow = true }}
  {{- else }}
    {{- /* Es parte de una serie - solo mostrar si es Ã­ndice */ -}}
    {{- $isIndex := and $hasSeriesRole (eq .Params.series_role "index") }}
    {{- $shouldShow = $isIndex }}
  {{- end }}

  {{- if $shouldShow }}
    {{- $filtered = $filtered | append . }}
  {{- end }}
{{- end }}

{{- return $filtered }}
