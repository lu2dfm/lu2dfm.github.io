---
author: LU2DFM
categories:
- Software
date: 2025-08-10
description: DespuÃ©s de varios aÃ±os con el sitio estÃ¡tico, decidÃ­ implementar soporte
  multiidioma completo. El objetivo era servir contenido en castellano, inglÃ©s y portu...
draft: false
tags:
- Hugo
- Site
thumbnail: /post-images/2025/hugo134.svg
title: 'Sitio multiidioma con Hugo: un solo Ã¡rbol de contenido para tres idiomas'
---

DespuÃ©s de varios aÃ±os con el sitio estÃ¡tico, decidÃ­ implementar soporte multiidioma completo. El objetivo era servir contenido en castellano, inglÃ©s y portuguÃ©s brasileÃ±o **desde un solo Ã¡rbol de archivos**, sin duplicar estructura ni complicar el mantenimiento.

## El Problema Original

Mi sitio tenÃ­a posts solo en castellano, pero querÃ­a que radioaficionados de otros paÃ­ses pudieran acceder al contenido tÃ©cnico. Las opciones tradicionales de Hugo (i18n con directorios separados) generaban mucha duplicaciÃ³n:

```
content/
â”œâ”€â”€ es/
â”‚   â”œâ”€â”€ posts/
â”‚   â””â”€â”€ series/
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ posts/
â”‚   â””â”€â”€ series/
â””â”€â”€ pt-br/
    â”œâ”€â”€ posts/
    â””â”€â”€ series/
```

Esto significaba **mantener 3 versiones** de cada archivo, incluso cuando solo cambiaba el contenido.

## La SoluciÃ³n: Data Files + Templates Inteligentes

ImplementÃ© un sistema hÃ­brido que usa **data files YAML** para el contenido multiidioma y **templates Hugo** que seleccionan automÃ¡ticamente el idioma correcto.

### Estructura Final

```
content/
â””â”€â”€ 20250810_mi_post.md          # Solo metadatos

data/
â””â”€â”€ 20250810_mi_post.yaml        # Contenido en 3 idiomas

layouts/
â”œâ”€â”€ _default/
â”‚   â”œâ”€â”€ single.html              # Renderiza desde data files
â”‚   â””â”€â”€ summary.html             # Extractos multiidioma
â””â”€â”€ partials/
    â””â”€â”€ content-renderer.html    # LÃ³gica de selecciÃ³n de idioma
```

### Archivo de Contenido (.md)

El archivo `.md` solo contiene metadatos y una referencia:

```markdown
---
title: 'Antena Moxon para 6m'
date: 2025-08-10
categories: ["Radio"]
tags: ["Antena", "VHF"]
---

Este post usa data files para mostrar contenido diferente segÃºn el idioma del usuario.
```

### Data File (.yaml)

Todo el contenido real estÃ¡ en el archivo YAML:

```yaml
title:
  es: 'Antena Moxon para 6 metros'
  en: 'Moxon Antenna for 6 meters'
  pt: 'Antena Moxon para 6 metros'

content:
  es: |
    La Moxon es una direccional simple de dos elementos...
    
  en: |
    The Moxon is a simple two-element directional antenna...
    
  pt: |
    A Moxon Ã© uma antena direcional simples de dois elementos...
```

### Template de Renderizado

El template detecta automÃ¡ticamente el idioma y renderiza el contenido apropiado:

```go-html-template
{{ $currentLang := .Language.Lang }}
{{ $contentKey := .File.BaseFileName }}
{{ $dataFile := index .Site.Data $contentKey }}

{{ if $dataFile }}
  {{ $title := index $dataFile.title $currentLang }}
  {{ $content := index $dataFile.content $currentLang }}
  
  <h1>{{ $title }}</h1>
  <div class="content">
    {{ $content | markdownify }}
  </div>
{{ end }}
```

## Beneficios del Sistema

### âœ… **Mantenimiento Simplificado**
- **Un solo archivo** por post (el .yaml)
- **Una sola URL** que sirve 3 idiomas
- **Sin duplicaciÃ³n** de estructura de directorios

### âœ… **SEO Optimizado**
- URLs limpias: `/es/post/`, `/en/post/`, `/pt-br/post/`
- **Hreflang automÃ¡tico** entre versiones
- **Contenido Ãºnico** por idioma (no duplicado)

### âœ… **Experiencia de Usuario**
- **Cambio de idioma instantÃ¡neo** (misma URL)
- **Consistencia** en navegaciÃ³n
- **Fallback inteligente** si falta traducciÃ³n

### âœ… **Flujo de Trabajo Eficiente**
- Escribo en castellano
- Sistema traduce automÃ¡ticamente a EN/PT-BR
- **Una sola publicaciÃ³n** para los 3 idiomas

## ImplementaciÃ³n TÃ©cnica

El corazÃ³n del sistema estÃ¡ en la lÃ³gica de templates que:

1. **Detecta el idioma** actual (`{{ .Language.Lang }}`)
2. **Busca el data file** correspondiente
3. **Extrae contenido** en el idioma apropiado
4. **Renderiza con fallback** si falta traducciÃ³n

```go-html-template
{{/* Buscar contenido en idioma actual */}}
{{ $content := index $dataFile.content $currentLang }}

{{/* Fallback a castellano si no existe traducciÃ³n */}}
{{ if not $content }}
  {{ $content = index $dataFile.content "es" }}
{{ end }}

{{ $content | markdownify }}
```

## Resultados

El sitio ahora sirve **automÃ¡ticamente** contenido en castellano, inglÃ©s y portuguÃ©s desde una sola base de cÃ³digo. Los radioaficionados pueden acceder a los artÃ­culos tÃ©cnicos en su idioma preferido, y yo solo tengo que mantener un conjunto de archivos.

**URLs del sitio:**
- ðŸ‡¦ðŸ‡· [lu2dfm.github.io/es/](https://lu2dfm.github.io/es/)
- ðŸ‡§ðŸ‡· [lu2dfm.github.io/pt-br/](https://lu2dfm.github.io/pt-br/)
- ðŸ‡ºðŸ‡¸ [lu2dfm.github.io/en/](https://lu2dfm.github.io/en/) 

El sistema funciona transparentemente para el usuario final, pero simplifica enormemente el trabajo de mantenimiento y permite escalar fÃ¡cilmente a mÃ¡s idiomas en el futuro.
